/*!
 * fancyBox - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybox/
 * License: www.fancyapps.com/fancybox/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
!function(window,document,$,undefined){"use strict";var H=$("html"),W=$(window),D=$(document),F=$.fancybox=function(){F.open.apply(this,arguments)},IE=navigator.userAgent.match(/msie/i),didUpdate=null,isTouch=document.createTouch!==undefined,isQuery=function(obj){return obj&&obj.hasOwnProperty&&obj instanceof $},isString=function(str){return str&&"string"===$.type(str)},isPercentage=function(str){return isString(str)&&str.indexOf("%")>0},isScrollable=function(el){return el&&!(el.style.overflow&&"hidden"===el.style.overflow)&&(el.clientWidth&&el.scrollWidth>el.clientWidth||el.clientHeight&&el.scrollHeight>el.clientHeight)},getScalar=function(orig,dim){var value=parseInt(orig,10)||0;return dim&&isPercentage(orig)&&(value=F.getViewport()[dim]/100*value),Math.ceil(value)},getValue=function(value,dim){return getScalar(value,dim)+"px"};$.extend(F,{// The current version of fancyBox
version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,// Set to 2 for retina display support
autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!isTouch,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",// 'auto', 'yes' or 'no'
wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",// enter
34:"up",// page down
39:"left",// right arrow
40:"up"},prev:{8:"right",// backspace
33:"down",// page up
37:"right",// left arrow
38:"down"},close:[27],// escape key
play:[32],// space - start/stop slideshow
toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,// Override some properties
index:0,type:null,href:null,content:null,title:null,// HTML templates
tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(IE?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},// Properties for each animation type
// Opening fancyBox
openEffect:"fade",// 'elastic', 'fade' or 'none'
openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",// Closing fancyBox
closeEffect:"fade",// 'elastic', 'fade' or 'none'
closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",// Changing next gallery item
nextEffect:"elastic",// 'elastic', 'fade' or 'none'
nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",// Changing previous gallery item
prevEffect:"elastic",// 'elastic', 'fade' or 'none'
prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",// Enable default helpers
helpers:{overlay:!0,title:!0},// Callbacks
onCancel:$.noop,// If canceling
beforeLoad:$.noop,// Before loading
afterLoad:$.noop,// After loading
beforeShow:$.noop,// Before changing in current item
afterShow:$.noop,// After opening
beforeChange:$.noop,// Before changing gallery item
beforeClose:$.noop,// Before closing
afterClose:$.noop},//Current state
group:{},// Selected group
opts:{},// Group options
previous:null,// Previous element
coming:null,// Element being loaded
current:null,// Currently loaded element
isActive:!1,// Is activated
isOpen:!1,// Is currently open
isOpened:!1,// Have been fully opened at least once
wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},// Loaders
ajaxLoad:null,imgPreload:null,// Some collections
transitions:{},helpers:{},/*
		 *	Static methods
		 */
open:function(group,opts){// Normalize group
// Recheck if the type of each element is `object` and set content type (image, ajax, etc)
// Extend the defaults
// All options are merged recursive except keys
return group&&($.isPlainObject(opts)||(opts={}),!1!==F.close(!0))?($.isArray(group)||(group=isQuery(group)?$(group).get():[group]),$.each(group,function(i,element){var href,title,content,type,rez,hrefParts,selector,obj={};"object"===$.type(element)&&(// Check if is DOM element
element.nodeType&&(element=$(element)),isQuery(element)?(obj={href:element.data("fancybox-href")||element.attr("href"),title:element.data("fancybox-title")||element.attr("title"),isDom:!0,element:element},$.metadata&&$.extend(!0,obj,element.metadata())):obj=element),href=opts.href||obj.href||(isString(element)?element:null),title=opts.title!==undefined?opts.title:obj.title||"",content=opts.content||obj.content,type=content?"html":opts.type||obj.type,!type&&obj.isDom&&(type=element.data("fancybox-type"),type||(rez=element.prop("class").match(/fancybox\.(\w+)/),type=rez?rez[1]:null)),isString(href)&&(// Try to guess the content type
type||(F.isImage(href)?type="image":F.isSWF(href)?type="swf":"#"===href.charAt(0)?type="inline":isString(element)&&(type="html",content=element)),// Split url into two pieces with source url and content selector, e.g,
// "/mypage.html #my_id" will load "/mypage.html" and display element having id "my_id"
"ajax"===type&&(hrefParts=href.split(/\s+/,2),href=hrefParts.shift(),selector=hrefParts.shift())),content||("inline"===type?href?content=$(isString(href)?href.replace(/.*(?=#[^\s]+$)/,""):href):obj.isDom&&(content=element):"html"===type?content=href:type||href||!obj.isDom||(type="inline",content=element)),$.extend(obj,{href:href,type:type,content:content,title:title,selector:selector}),group[i]=obj}),F.opts=$.extend(!0,{},F.defaults,opts),opts.keys!==undefined&&(F.opts.keys=opts.keys?$.extend({},F.defaults.keys,opts.keys):!1),F.group=group,F._start(F.opts.index)):void 0},// Cancel image loading or abort ajax request
cancel:function(){var coming=F.coming;coming&&!1!==F.trigger("onCancel")&&(F.hideLoading(),F.ajaxLoad&&F.ajaxLoad.abort(),F.ajaxLoad=null,F.imgPreload&&(F.imgPreload.onload=F.imgPreload.onerror=null),coming.wrap&&coming.wrap.stop(!0,!0).trigger("onReset").remove(),F.coming=null,// If the first item has been canceled, then clear everything
F.current||F._afterZoomOut(coming))},// Start closing animation if is open; remove immediately if opening/closing
close:function(event){F.cancel(),!1!==F.trigger("beforeClose")&&(F.unbindEvents(),F.isActive&&(F.isOpen&&event!==!0?(F.isOpen=F.isOpened=!1,F.isClosing=!0,$(".fancybox-item, .fancybox-nav").remove(),F.wrap.stop(!0,!0).removeClass("fancybox-opened"),F.transitions[F.current.closeMethod]()):($(".fancybox-wrap").stop(!0).trigger("onReset").remove(),F._afterZoomOut())))},// Manage slideshow:
//   $.fancybox.play(); - toggle slideshow
//   $.fancybox.play( true ); - start
//   $.fancybox.play( false ); - stop
play:function(action){var clear=function(){clearTimeout(F.player.timer)},set=function(){clear(),F.current&&F.player.isActive&&(F.player.timer=setTimeout(F.next,F.current.playSpeed))},stop=function(){clear(),D.unbind(".player"),F.player.isActive=!1,F.trigger("onPlayEnd")},start=function(){F.current&&(F.current.loop||F.current.index<F.group.length-1)&&(F.player.isActive=!0,D.bind({"onCancel.player beforeClose.player":stop,"onUpdate.player":set,"beforeLoad.player":clear}),set(),F.trigger("onPlayStart"))};action===!0||!F.player.isActive&&action!==!1?start():stop()},// Navigate to next gallery item
next:function(direction){var current=F.current;current&&(isString(direction)||(direction=current.direction.next),F.jumpto(current.index+1,direction,"next"))},// Navigate to previous gallery item
prev:function(direction){var current=F.current;current&&(isString(direction)||(direction=current.direction.prev),F.jumpto(current.index-1,direction,"prev"))},// Navigate to gallery item by index
jumpto:function(index,direction,router){var current=F.current;current&&(index=getScalar(index),F.direction=direction||current.direction[index>=current.index?"next":"prev"],F.router=router||"jumpto",current.loop&&(0>index&&(index=current.group.length+index%current.group.length),index%=current.group.length),current.group[index]!==undefined&&(F.cancel(),F._start(index)))},// Center inside viewport and toggle position type to fixed or absolute if needed
reposition:function(e,onlyAbsolute){var pos,current=F.current,wrap=current?current.wrap:null;wrap&&(pos=F._getPosition(onlyAbsolute),e&&"scroll"===e.type?(delete pos.position,wrap.stop(!0,!0).animate(pos,200)):(wrap.css(pos),current.pos=$.extend({},current.dim,pos)))},update:function(e){var type=e&&e.type,anyway=!type||"orientationchange"===type;anyway&&(clearTimeout(didUpdate),didUpdate=null),F.isOpen&&!didUpdate&&(didUpdate=setTimeout(function(){var current=F.current;current&&!F.isClosing&&(F.wrap.removeClass("fancybox-tmp"),(anyway||"load"===type||"resize"===type&&current.autoResize)&&F._setDimension(),"scroll"===type&&current.canShrink||F.reposition(e),F.trigger("onUpdate"),didUpdate=null)},anyway&&!isTouch?0:300))},// Shrink content to fit inside viewport or restore if resized
toggle:function(action){F.isOpen&&(F.current.fitToView="boolean"===$.type(action)?action:!F.current.fitToView,// Help browser to restore document dimensions
isTouch&&(F.wrap.removeAttr("style").addClass("fancybox-tmp"),F.trigger("onUpdate")),F.update())},hideLoading:function(){D.unbind(".loading"),$("#fancybox-loading").remove()},showLoading:function(){var el,viewport;F.hideLoading(),el=$('<div id="fancybox-loading"><div></div></div>').click(F.cancel).appendTo("body"),// If user will press the escape-button, the request will be canceled
D.bind("keydown.loading",function(e){27===(e.which||e.keyCode)&&(e.preventDefault(),F.cancel())}),F.defaults.fixed||(viewport=F.getViewport(),el.css({position:"absolute",top:.5*viewport.h+viewport.y,left:.5*viewport.w+viewport.x}))},getViewport:function(){var locked=F.current&&F.current.locked||!1,rez={x:W.scrollLeft(),y:W.scrollTop()};// See http://bugs.jquery.com/ticket/6724
return locked?(rez.w=locked[0].clientWidth,rez.h=locked[0].clientHeight):(rez.w=isTouch&&window.innerWidth?window.innerWidth:W.width(),rez.h=isTouch&&window.innerHeight?window.innerHeight:W.height()),rez},// Unbind the keyboard / clicking actions
unbindEvents:function(){F.wrap&&isQuery(F.wrap)&&F.wrap.unbind(".fb"),D.unbind(".fb"),W.unbind(".fb")},bindEvents:function(){var keys,current=F.current;current&&(// Changing document height on iOS devices triggers a 'resize' event,
// that can change document height... repeating infinitely
W.bind("orientationchange.fb"+(isTouch?"":" resize.fb")+(current.autoCenter&&!current.locked?" scroll.fb":""),F.update),keys=current.keys,keys&&D.bind("keydown.fb",function(e){var code=e.which||e.keyCode,target=e.target||e.srcElement;// Skip esc key if loading, because showLoading will cancel preloading
// Skip esc key if loading, because showLoading will cancel preloading
// Ignore key combinations and key events within form elements
return 27===code&&F.coming?!1:void(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||target&&(target.type||$(target).is("[contenteditable]"))||$.each(keys,function(i,val){return current.group.length>1&&val[code]!==undefined?(F[i](val[code]),e.preventDefault(),!1):$.inArray(code,val)>-1?(F[i](),e.preventDefault(),!1):void 0}))}),$.fn.mousewheel&&current.mouseWheel&&F.wrap.bind("mousewheel.fb",function(e,delta,deltaX,deltaY){for(var target=e.target||null,parent=$(target),canScroll=!1;parent.length&&!(canScroll||parent.is(".fancybox-skin")||parent.is(".fancybox-wrap"));)canScroll=isScrollable(parent[0]),parent=$(parent).parent();0===delta||canScroll||F.group.length>1&&!current.canShrink&&(deltaY>0||deltaX>0?F.prev(deltaY>0?"down":"left"):(0>deltaY||0>deltaX)&&F.next(0>deltaY?"up":"right"),e.preventDefault())}))},trigger:function(event,o){var ret,obj=o||F.coming||F.current;if(obj){if($.isFunction(obj[event])&&(ret=obj[event].apply(obj,Array.prototype.slice.call(arguments,1))),ret===!1)return!1;obj.helpers&&$.each(obj.helpers,function(helper,opts){opts&&F.helpers[helper]&&$.isFunction(F.helpers[helper][event])&&F.helpers[helper][event]($.extend(!0,{},F.helpers[helper].defaults,opts),obj)}),D.trigger(event)}},isImage:function(str){return isString(str)&&str.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(str){return isString(str)&&str.match(/\.(swf)((\?|#).*)?$/i)},_start:function(index){var obj,href,type,margin,padding,coming={};if(index=getScalar(index),obj=F.group[index]||null,!obj)return!1;if(coming=$.extend(!0,{},F.opts,obj),// Convert margin and padding properties to array - top, right, bottom, left
margin=coming.margin,padding=coming.padding,"number"===$.type(margin)&&(coming.margin=[margin,margin,margin,margin]),"number"===$.type(padding)&&(coming.padding=[padding,padding,padding,padding]),// 'modal' propery is just a shortcut
coming.modal&&$.extend(!0,coming,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),// 'autoSize' property is a shortcut, too
coming.autoSize&&(coming.autoWidth=coming.autoHeight=!0),"auto"===coming.width&&(coming.autoWidth=!0),"auto"===coming.height&&(coming.autoHeight=!0),/*
			 * Add reference to the group, so it`s possible to access from callbacks, example:
			 * afterLoad : function() {
			 *     this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
			 * }
			 */
coming.group=F.group,coming.index=index,// Give a chance for callback or helpers to update coming item (type, title, etc)
F.coming=coming,!1===F.trigger("beforeLoad"))return void(F.coming=null);if(type=coming.type,href=coming.href,!type)//If we can not determine content type then drop silently or display next/prev item if looping through gallery
//If we can not determine content type then drop silently or display next/prev item if looping through gallery
return F.coming=null,F.current&&F.router&&"jumpto"!==F.router?(F.current.index=index,F[F.router](F.direction)):!1;// Check before try to load; 'inline' and 'html' types need content, others - href
if(F.isActive=!0,("image"===type||"swf"===type)&&(coming.autoHeight=coming.autoWidth=!1,coming.scrolling="visible"),"image"===type&&(coming.aspectRatio=!0),"iframe"===type&&isTouch&&(coming.scrolling="scroll"),// Build the neccessary markup
coming.wrap=$(coming.tpl.wrap).addClass("fancybox-"+(isTouch?"mobile":"desktop")+" fancybox-type-"+type+" fancybox-tmp "+coming.wrapCSS).appendTo(coming.parent||"body"),$.extend(coming,{skin:$(".fancybox-skin",coming.wrap),outer:$(".fancybox-outer",coming.wrap),inner:$(".fancybox-inner",coming.wrap)}),$.each(["Top","Right","Bottom","Left"],function(i,v){coming.skin.css("padding"+v,getValue(coming.padding[i]))}),F.trigger("onReady"),"inline"===type||"html"===type){if(!coming.content||!coming.content.length)return F._error("content")}else if(!href)return F._error("href");"image"===type?F._loadImage():"ajax"===type?F._loadAjax():"iframe"===type?F._loadIframe():F._afterLoad()},_error:function(type){$.extend(F.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:type,content:F.coming.tpl.error}),F._afterLoad()},_loadImage:function(){// Reset preload image so it is later possible to check "complete" property
var img=F.imgPreload=new Image;img.onload=function(){this.onload=this.onerror=null,F.coming.width=this.width/F.opts.pixelRatio,F.coming.height=this.height/F.opts.pixelRatio,F._afterLoad()},img.onerror=function(){this.onload=this.onerror=null,F._error("image")},img.src=F.coming.href,img.complete!==!0&&F.showLoading()},_loadAjax:function(){var coming=F.coming;F.showLoading(),F.ajaxLoad=$.ajax($.extend({},coming.ajax,{url:coming.href,error:function(jqXHR,textStatus){F.coming&&"abort"!==textStatus?F._error("ajax",jqXHR):F.hideLoading()},success:function(data,textStatus){"success"===textStatus&&(coming.content=data,F._afterLoad())}}))},_loadIframe:function(){var coming=F.coming,iframe=$(coming.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",isTouch?"auto":coming.iframe.scrolling).attr("src",coming.href);// This helps IE
$(coming.wrap).bind("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(e){}}),coming.iframe.preload&&(F.showLoading(),iframe.one("load",function(){$(this).data("ready",1),// iOS will lose scrolling if we resize
isTouch||$(this).bind("load.fb",F.update),// Without this trick:
//   - iframe won't scroll on iOS devices
//   - IE7 sometimes displays empty iframe
$(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show(),F._afterLoad()})),coming.content=iframe.appendTo(coming.inner),coming.iframe.preload||F._afterLoad()},_preloadImages:function(){var item,i,group=F.group,current=F.current,len=group.length,cnt=current.preload?Math.min(current.preload,len-1):0;for(i=1;cnt>=i;i+=1)item=group[(current.index+i)%len],"image"===item.type&&item.href&&((new Image).src=item.href)},_afterLoad:function(){var current,content,type,scrolling,href,embed,coming=F.coming,previous=F.current,placeholder="fancybox-placeholder";if(F.hideLoading(),coming&&F.isActive!==!1){if(!1===F.trigger("afterLoad",coming,previous))return coming.wrap.stop(!0).trigger("onReset").remove(),void(F.coming=null);switch(previous&&(F.trigger("beforeChange",previous),previous.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove()),F.unbindEvents(),current=coming,content=coming.content,type=coming.type,scrolling=coming.scrolling,$.extend(F,{wrap:current.wrap,skin:current.skin,outer:current.outer,inner:current.inner,current:current,previous:previous}),href=current.href,type){case"inline":case"ajax":case"html":current.selector?content=$("<div>").html(content).find(current.selector):isQuery(content)&&(content.data(placeholder)||content.data(placeholder,$('<div class="'+placeholder+'"></div>').insertAfter(content).hide()),content=content.show().detach(),current.wrap.bind("onReset",function(){$(this).find(content).length&&content.hide().replaceAll(content.data(placeholder)).data(placeholder,!1)}));break;case"image":content=current.tpl.image.replace("{href}",href);break;case"swf":content='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+href+'"></param>',embed="",$.each(current.swf,function(name,val){content+='<param name="'+name+'" value="'+val+'"></param>',embed+=" "+name+'="'+val+'"'}),content+='<embed src="'+href+'" type="application/x-shockwave-flash" width="100%" height="100%"'+embed+"></embed></object>"}isQuery(content)&&content.parent().is(current.inner)||current.inner.append(content),// Give a chance for helpers or callbacks to update elements
F.trigger("beforeShow"),// Set scrolling before calculating dimensions
current.inner.css("overflow","yes"===scrolling?"scroll":"no"===scrolling?"hidden":scrolling),// Set initial dimensions and start position
F._setDimension(),F.reposition(),F.isOpen=!1,F.coming=null,F.bindEvents(),F.isOpened?previous.prevMethod&&F.transitions[previous.prevMethod]():$(".fancybox-wrap").not(current.wrap).stop(!0).trigger("onReset").remove(),F.transitions[F.isOpened?current.nextMethod:current.openMethod](),F._preloadImages()}},_setDimension:function(){var wPadding,hPadding,wSpace,hSpace,origWidth,origHeight,origMaxWidth,origMaxHeight,ratio,width_,height_,maxWidth_,maxHeight_,iframe,body,viewport=F.getViewport(),steps=0,canShrink=!1,canExpand=!1,wrap=F.wrap,skin=F.skin,inner=F.inner,current=F.current,width=current.width,height=current.height,minWidth=current.minWidth,minHeight=current.minHeight,maxWidth=current.maxWidth,maxHeight=current.maxHeight,scrolling=current.scrolling,scrollOut=current.scrollOutside?current.scrollbarWidth:0,margin=current.margin,wMargin=getScalar(margin[1]+margin[3]),hMargin=getScalar(margin[0]+margin[2]);if(// Reset dimensions so we could re-check actual size
wrap.add(skin).add(inner).width("auto").height("auto").removeClass("fancybox-tmp"),wPadding=getScalar(skin.outerWidth(!0)-skin.width()),hPadding=getScalar(skin.outerHeight(!0)-skin.height()),// Any space between content and viewport (margin, padding, border, title)
wSpace=wMargin+wPadding,hSpace=hMargin+hPadding,origWidth=isPercentage(width)?(viewport.w-wSpace)*getScalar(width)/100:width,origHeight=isPercentage(height)?(viewport.h-hSpace)*getScalar(height)/100:height,"iframe"===current.type){if(iframe=current.content,current.autoHeight&&1===iframe.data("ready"))try{iframe[0].contentWindow.document.location&&(inner.width(origWidth).height(9999),body=iframe.contents().find("body"),scrollOut&&body.css("overflow-x","hidden"),origHeight=body.outerHeight(!0))}catch(e){}}else(current.autoWidth||current.autoHeight)&&(inner.addClass("fancybox-tmp"),// Set width or height in case we need to calculate only one dimension
current.autoWidth||inner.width(origWidth),current.autoHeight||inner.height(origHeight),current.autoWidth&&(origWidth=inner.width()),current.autoHeight&&(origHeight=inner.height()),inner.removeClass("fancybox-tmp"));// Try to fit inside viewport (including the title)
if(width=getScalar(origWidth),height=getScalar(origHeight),ratio=origWidth/origHeight,// Calculations for the content
minWidth=getScalar(isPercentage(minWidth)?getScalar(minWidth,"w")-wSpace:minWidth),maxWidth=getScalar(isPercentage(maxWidth)?getScalar(maxWidth,"w")-wSpace:maxWidth),minHeight=getScalar(isPercentage(minHeight)?getScalar(minHeight,"h")-hSpace:minHeight),maxHeight=getScalar(isPercentage(maxHeight)?getScalar(maxHeight,"h")-hSpace:maxHeight),// These will be used to determine if wrap can fit in the viewport
origMaxWidth=maxWidth,origMaxHeight=maxHeight,current.fitToView&&(maxWidth=Math.min(viewport.w-wSpace,maxWidth),maxHeight=Math.min(viewport.h-hSpace,maxHeight)),maxWidth_=viewport.w-wMargin,maxHeight_=viewport.h-hMargin,current.aspectRatio?(width>maxWidth&&(width=maxWidth,height=getScalar(width/ratio)),height>maxHeight&&(height=maxHeight,width=getScalar(height*ratio)),minWidth>width&&(width=minWidth,height=getScalar(width/ratio)),minHeight>height&&(height=minHeight,width=getScalar(height*ratio))):(width=Math.max(minWidth,Math.min(width,maxWidth)),current.autoHeight&&"iframe"!==current.type&&(inner.width(width),height=inner.height()),height=Math.max(minHeight,Math.min(height,maxHeight))),current.fitToView)if(inner.width(width).height(height),wrap.width(width+wPadding),// Real wrap dimensions
width_=wrap.width(),height_=wrap.height(),current.aspectRatio)for(;(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight&&!(steps++>19);)height=Math.max(minHeight,Math.min(maxHeight,height-10)),width=getScalar(height*ratio),minWidth>width&&(width=minWidth,height=getScalar(width/ratio)),width>maxWidth&&(width=maxWidth,height=getScalar(width/ratio)),inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height();else width=Math.max(minWidth,Math.min(width,width-(width_-maxWidth_))),height=Math.max(minHeight,Math.min(height,height-(height_-maxHeight_)));scrollOut&&"auto"===scrolling&&origHeight>height&&maxWidth_>width+wPadding+scrollOut&&(width+=scrollOut),inner.width(width).height(height),wrap.width(width+wPadding),width_=wrap.width(),height_=wrap.height(),canShrink=(width_>maxWidth_||height_>maxHeight_)&&width>minWidth&&height>minHeight,canExpand=current.aspectRatio?origMaxWidth>width&&origMaxHeight>height&&origWidth>width&&origHeight>height:(origMaxWidth>width||origMaxHeight>height)&&(origWidth>width||origHeight>height),$.extend(current,{dim:{width:getValue(width_),height:getValue(height_)},origWidth:origWidth,origHeight:origHeight,canShrink:canShrink,canExpand:canExpand,wPadding:wPadding,hPadding:hPadding,wrapSpace:height_-skin.outerHeight(!0),skinSpace:skin.height()-height}),!iframe&&current.autoHeight&&height>minHeight&&maxHeight>height&&!canExpand&&inner.height("auto")},_getPosition:function(onlyAbsolute){var current=F.current,viewport=F.getViewport(),margin=current.margin,width=F.wrap.width()+margin[1]+margin[3],height=F.wrap.height()+margin[0]+margin[2],rez={position:"absolute",top:margin[0],left:margin[3]};return current.autoCenter&&current.fixed&&!onlyAbsolute&&height<=viewport.h&&width<=viewport.w?rez.position="fixed":current.locked||(rez.top+=viewport.y,rez.left+=viewport.x),rez.top=getValue(Math.max(rez.top,rez.top+(viewport.h-height)*current.topRatio)),rez.left=getValue(Math.max(rez.left,rez.left+(viewport.w-width)*current.leftRatio)),rez},_afterZoomIn:function(){var current=F.current;current&&(F.isOpen=F.isOpened=!0,F.wrap.css("overflow","visible").addClass("fancybox-opened"),F.update(),// Assign a click event
(current.closeClick||current.nextClick&&F.group.length>1)&&F.inner.css("cursor","pointer").bind("click.fb",function(e){$(e.target).is("a")||$(e.target).parent().is("a")||(e.preventDefault(),F[current.closeClick?"close":"next"]())}),// Create a close button
current.closeBtn&&$(current.tpl.closeBtn).appendTo(F.skin).bind("click.fb",function(e){e.preventDefault(),F.close()}),// Create navigation arrows
current.arrows&&F.group.length>1&&((current.loop||current.index>0)&&$(current.tpl.prev).appendTo(F.outer).bind("click.fb",F.prev),(current.loop||current.index<F.group.length-1)&&$(current.tpl.next).appendTo(F.outer).bind("click.fb",F.next)),F.trigger("afterShow"),// Stop the slideshow if this is the last item
current.loop||current.index!==current.group.length-1?F.opts.autoPlay&&!F.player.isActive&&(F.opts.autoPlay=!1,F.play()):F.play(!1))},_afterZoomOut:function(obj){obj=obj||F.current,$(".fancybox-wrap").trigger("onReset").remove(),$.extend(F,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),F.trigger("afterClose",obj)}}),/*
	 *	Default transitions
	 */
F.transitions={getOrigPosition:function(){var current=F.current,element=current.element,orig=current.orig,pos={},width=50,height=50,hPadding=current.hPadding,wPadding=current.wPadding,viewport=F.getViewport();return!orig&&current.isDom&&element.is(":visible")&&(orig=element.find("img:first"),orig.length||(orig=element)),isQuery(orig)?(pos=orig.offset(),orig.is("img")&&(width=orig.outerWidth(),height=orig.outerHeight())):(pos.top=viewport.y+(viewport.h-height)*current.topRatio,pos.left=viewport.x+(viewport.w-width)*current.leftRatio),("fixed"===F.wrap.css("position")||current.locked)&&(pos.top-=viewport.y,pos.left-=viewport.x),pos={top:getValue(pos.top-hPadding*current.topRatio),left:getValue(pos.left-wPadding*current.leftRatio),width:getValue(width+wPadding),height:getValue(height+hPadding)}},step:function(now,fx){var ratio,padding,value,prop=fx.prop,current=F.current,wrapSpace=current.wrapSpace,skinSpace=current.skinSpace;("width"===prop||"height"===prop)&&(ratio=fx.end===fx.start?1:(now-fx.start)/(fx.end-fx.start),F.isClosing&&(ratio=1-ratio),padding="width"===prop?current.wPadding:current.hPadding,value=now-padding,F.skin[prop](getScalar("width"===prop?value:value-wrapSpace*ratio)),F.inner[prop](getScalar("width"===prop?value:value-wrapSpace*ratio-skinSpace*ratio)))},zoomIn:function(){var current=F.current,startPos=current.pos,effect=current.openEffect,elastic="elastic"===effect,endPos=$.extend({opacity:1},startPos);// Remove "position" property that breaks older IE
delete endPos.position,elastic?(startPos=this.getOrigPosition(),current.openOpacity&&(startPos.opacity=.1)):"fade"===effect&&(startPos.opacity=.1),F.wrap.css(startPos).animate(endPos,{duration:"none"===effect?0:current.openSpeed,easing:current.openEasing,step:elastic?this.step:null,complete:F._afterZoomIn})},zoomOut:function(){var current=F.current,effect=current.closeEffect,elastic="elastic"===effect,endPos={opacity:.1};elastic&&(endPos=this.getOrigPosition(),current.closeOpacity&&(endPos.opacity=.1)),F.wrap.animate(endPos,{duration:"none"===effect?0:current.closeSpeed,easing:current.closeEasing,step:elastic?this.step:null,complete:F._afterZoomOut})},changeIn:function(){var field,current=F.current,effect=current.nextEffect,startPos=current.pos,endPos={opacity:1},direction=F.direction,distance=200;startPos.opacity=.1,"elastic"===effect&&(field="down"===direction||"up"===direction?"top":"left","down"===direction||"right"===direction?(startPos[field]=getValue(getScalar(startPos[field])-distance),endPos[field]="+="+distance+"px"):(startPos[field]=getValue(getScalar(startPos[field])+distance),endPos[field]="-="+distance+"px")),// Workaround for http://bugs.jquery.com/ticket/12273
"none"===effect?F._afterZoomIn():F.wrap.css(startPos).animate(endPos,{duration:current.nextSpeed,easing:current.nextEasing,complete:F._afterZoomIn})},changeOut:function(){var previous=F.previous,effect=previous.prevEffect,endPos={opacity:.1},direction=F.direction,distance=200;"elastic"===effect&&(endPos["down"===direction||"up"===direction?"top":"left"]=("up"===direction||"left"===direction?"-":"+")+"="+distance+"px"),previous.wrap.animate(endPos,{duration:"none"===effect?0:previous.prevSpeed,easing:previous.prevEasing,complete:function(){$(this).trigger("onReset").remove()}})}},/*
	 *	Overlay helper
	 */
F.helpers.overlay={defaults:{closeClick:!0,// if true, fancyBox will be closed when user clicks on the overlay
speedOut:200,// duration of fadeOut animation
showEarly:!0,// indicates if should be opened immediately or wait until the content is ready
css:{},// custom CSS properties
locked:!isTouch,// if true, the content will be locked into overlay
fixed:!0},overlay:null,// current handle
fixed:!1,// indicates if the overlay has position "fixed"
el:$("html"),// element that contains "the lock"
// Public methods
create:function(opts){opts=$.extend({},this.defaults,opts),this.overlay&&this.close(),this.overlay=$('<div class="fancybox-overlay"></div>').appendTo(F.coming?F.coming.parent:opts.parent),this.fixed=!1,opts.fixed&&F.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(opts){var that=this;opts=$.extend({},this.defaults,opts),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(opts),this.fixed||(W.bind("resize.overlay",$.proxy(this.update,this)),this.update()),opts.closeClick&&this.overlay.bind("click.overlay",function(e){return $(e.target).hasClass("fancybox-overlay")?(F.isActive?F.close():that.close(),!1):void 0}),this.overlay.css(opts.css).show()},close:function(){var scrollV,scrollH;W.unbind("resize.overlay"),this.el.hasClass("fancybox-lock")&&($(".fancybox-margin").removeClass("fancybox-margin"),scrollV=W.scrollTop(),scrollH=W.scrollLeft(),this.el.removeClass("fancybox-lock"),W.scrollTop(scrollV).scrollLeft(scrollH)),$(".fancybox-overlay").remove().hide(),$.extend(this,{overlay:null,fixed:!1})},// Private, callbacks
update:function(){var offsetWidth,width="100%";// Reset width/height so it will not mess
this.overlay.width(width).height("100%"),// jQuery does not return reliable result for IE
IE?(offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),D.width()>offsetWidth&&(width=D.width())):D.width()>W.width()&&(width=D.width()),this.overlay.width(width).height(D.height())},// This is where we can manipulate DOM, because later it would cause iframes to reload
onReady:function(opts,obj){var overlay=this.overlay;$(".fancybox-overlay").stop(!0,!0),overlay||this.create(opts),opts.locked&&this.fixed&&obj.fixed&&(overlay||(this.margin=D.height()>W.height()?$("html").css("margin-right").replace("px",""):!1),obj.locked=this.overlay.append(obj.wrap),obj.fixed=!1),opts.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(opts,obj){var scrollV,scrollH;obj.locked&&(this.margin!==!1&&($("*").filter(function(){return"fixed"===$(this).css("position")&&!$(this).hasClass("fancybox-overlay")&&!$(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),scrollV=W.scrollTop(),scrollH=W.scrollLeft(),this.el.addClass("fancybox-lock"),W.scrollTop(scrollV).scrollLeft(scrollH)),this.open(opts)},onUpdate:function(){this.fixed||this.update()},afterClose:function(opts){// Remove overlay if exists and fancyBox is not opening
// (e.g., it is not being open using afterClose callback)
//if (this.overlay && !F.isActive) {
this.overlay&&!F.coming&&this.overlay.fadeOut(opts.speedOut,$.proxy(this.close,this))}},/*
	 *	Title helper
	 */
F.helpers.title={defaults:{type:"float",// 'float', 'inside', 'outside' or 'over',
position:"bottom"},beforeShow:function(opts){var title,target,current=F.current,text=current.title,type=opts.type;if($.isFunction(text)&&(text=text.call(current.element,current)),isString(text)&&""!==$.trim(text)){switch(title=$('<div class="fancybox-title fancybox-title-'+type+'-wrap">'+text+"</div>"),type){case"inside":target=F.skin;break;case"outside":target=F.wrap;break;case"over":target=F.inner;break;default:// 'float'
target=F.skin,title.appendTo("body"),IE&&title.width(title.width()),title.wrapInner('<span class="child"></span>'),//Increase bottom margin so this title will also fit into viewport
F.current.margin[2]+=Math.abs(getScalar(title.css("margin-bottom")))}title["top"===opts.position?"prependTo":"appendTo"](target)}}},// jQuery plugin initialization
$.fn.fancybox=function(options){var index,that=$(this),selector=this.selector||"",run=function(e){var relType,relVal,what=$(this).blur(),idx=index;e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||what.is(".fancybox-wrap")||(relType=options.groupAttr||"data-fancybox-group",relVal=what.attr(relType),relVal||(relType="rel",relVal=what.get(0)[relType]),relVal&&""!==relVal&&"nofollow"!==relVal&&(what=selector.length?$(selector):that,what=what.filter("["+relType+'="'+relVal+'"]'),idx=what.index(this)),options.index=idx,// Stop an event from bubbling if everything is fine
F.open(what,options)!==!1&&e.preventDefault())};return options=options||{},index=options.index||0,selector&&options.live!==!1?D.undelegate(selector,"click.fb-start").delegate(selector+":not('.fancybox-item, .fancybox-nav')","click.fb-start",run):that.unbind("click.fb-start").bind("click.fb-start",run),this.filter("[data-fancybox-start=1]").trigger("click"),this},// Tests that need a body at doc ready
D.ready(function(){var w1,w2;$.scrollbarWidth===undefined&&(// http://benalman.com/projects/jquery-misc-plugins/#scrollbarwidth
$.scrollbarWidth=function(){var parent=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),child=parent.children(),width=child.innerWidth()-child.height(99).innerWidth();return parent.remove(),width}),$.support.fixedPosition===undefined&&($.support.fixedPosition=function(){var elem=$('<div style="position:fixed;top:20px;"></div>').appendTo("body"),fixed=20===elem[0].offsetTop||15===elem[0].offsetTop;return elem.remove(),fixed}()),$.extend(F.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$("body")}),//Get real width of page scroll-bar
w1=$(window).width(),H.addClass("fancybox-lock-test"),w2=$(window).width(),H.removeClass("fancybox-lock-test"),$("<style type='text/css'>.fancybox-margin{margin-right:"+(w2-w1)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function($,window,document){var app={duration:500,init:function(){app.hint.init(),app.contentLoad.init()},contentLoad:{init:function(){try{var mq=window.matchMedia("(min-width: 480px)");mq.matches?app.contentLoad.twoColumnsBehaviour():app.contentLoad.oneColumnBehaviour(),mq.addListener(function(e){e.matches?app.contentLoad.twoColumnsBehaviour():app.contentLoad.oneColumnBehaviour()})}catch(err){app.contentLoad.oneColumnBehaviour()}},twoColumnsBehaviour:function(){$(".view-large").each(function(){var item=$(this);item.off("click"),item.on("click",function(e){e.preventDefault(),$.fancybox.open({href:item.attr("href"),closeBtn:!1,closeClick:!0})})}),$(window).scroll(function(){app.hint.show($(this)),clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-500){var tile=$(".hidden-tile").first(),yearBox=tile.closest(".year-box"),leftHeight=yearBox.find(".left-row").height(),rightHeight=yearBox.find(".right-row").height();app.tile.load(yearBox.find(".left-row .hidden-tile").length>0?rightHeight>=leftHeight||0===yearBox.find(".right-row .hidden-tile").length?yearBox.find(".left-row .hidden-tile").first():yearBox.find(".right-row .hidden-tile").first():yearBox.find(".right-row .hidden-tile").first()),yearBox.fadeIn()}},20))})},oneColumnBehaviour:function(){$(".right-row .info-tile").not(".hidden-tile").each(function(){app.tile.hide($(this))}),$(".view-large").off("click"),$(".view-large").on("click",function(e){e.preventDefault()}),$(window).scroll(function(){app.hint.show($(this)),clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){if($(window).scrollTop()+$(window).height()>$(document).height()-600){var yearBox=$(".year-box .hidden-tile").first().closest(".year-box");yearBox.fadeIn(function(){app.tile.load(yearBox.find(".hidden-tile").first())})}},20))})}},hint:{init:function(){$(".back-to-top").on("click",function(event){event.preventDefault(),$("html, body").animate({scrollTop:0},app.duration)})},show:function(w){w.scrollTop()>500?$(".back-to-top").fadeIn(app.duration):$(".back-to-top").fadeOut(app.duration)}},tile:{load:function(tile){var imgElement=tile.find("img"),attr=imgElement.attr("data-src");console.log(imgElement),console.log(attr),"undefined"!=typeof attr&&attr!==!1&&(imgElement.attr("src",attr),console.log("attr added")),setTimeout(function(){return tile.removeClass("hidden-tile").addClass("animated"),!0},20)},hide:function(tile){tile.addClass("hidden-tile").removeClass("animated");var imgElement=tile.find("img"),attr=imgElement.attr("src");return"undefined"!=typeof attr&&attr!==!1?(imgElement.attr("data-src",attr),imgElement.attr("src",attr),!0):void 0}}};$(document).ready(function(){app.init()})}(jQuery,window,document);